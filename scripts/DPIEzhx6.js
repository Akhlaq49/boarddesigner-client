import{f as s,i as e,h as t,c as a,o,O as r,a as i,v as n,n as l,l as c,t as d,R as u,ae as f,D as p,ai as m}from"./D91FHcbo.js";import{d as y}from"./DhtFqH4B.js";const b={key:0,class:"mb-6"},g=["disabled"],h=s({name:"XForm",props:{autoValidate:{type:Boolean,default:!0},autoFocus:{type:Boolean,default:!0},disabled:Boolean,errors:{type:[Array,Object],default:()=>[]},title:String,description:String,hasFooter:{type:Boolean,default:!0}},emits:["submit"],setup(s,{expose:h,emit:v}){const F=s,E=v,B=[];f(m,{registerInput:(s,e,t,a)=>{const o=B.find(e=>e.name===s);o?(o.focus=e,o.validate=t,o.setError=a):B.push({name:s,focus:e,validate:t,setError:a})},unregisterInput:s=>{const e=B.findIndex(e=>e.name===s);B.splice(e,1)},isInsideForm:!0}),e(async()=>{F.autoFocus&&B&&B.length>0&&setTimeout(B[0].focus,50)}),t(()=>F.errors,s=>{s&&p(()=>{if(Array.isArray(s))s.forEach((s,e)=>{const t=B.find(e=>e.name===s.field);t&&(t.setError(s.msg),0===e&&t.focus&&t.focus())});else{const e=B.find(e=>e.name===s.field);e&&(e.setError(s.msg),e.focus&&e.focus())}})});const $=()=>{let s=!0;return B.forEach(e=>{!e.validate()&&s&&(s=!1,e.focus&&e.focus())}),s},k=s=>{s.preventDefault(),s.stopPropagation();const e=!F.autoValidate||$();E("submit",e)};h({validate:$,submit:k});const{styles:I,classes:j,className:x}=y("Form",{},F);return(s,e)=>(o(),a("form",{style:u(c(I)),class:l([c(x),c(j).wrapper]),onSubmit:k},[r(s.$slots,"header",{},()=>[s.title||s.description?(o(),a("div",b,[s.title?(o(),a("p",{key:0,class:l(c(j).title)},d(s.title),3)):n("",!0),s.description?(o(),a("p",{key:1,class:l(c(j).description)},d(s.description),3)):n("",!0)])):n("",!0)]),i("fieldset",{disabled:s.disabled,class:l([c(j).content,"contents"])},[r(s.$slots,"default")],10,g),s.hasFooter?r(s.$slots,"footer",{key:0},()=>[i("div",{class:l(c(j).footer)},[r(s.$slots,"primary-action"),r(s.$slots,"secondary-action")],2)]):n("",!0)],38))}});export{h as _};
